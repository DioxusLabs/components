var focusable=function(element){if(element.tabIndex<0||element.getAttribute("disabled"))return!1;switch(element.tagName){case"A":return!!element.href&&element.rel!=="ignore";case"INPUT":return element.type!=="hidden";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1;}};class FocusTrap{container;restoreFocusElement;nodeWalker;constructor(container){this.container=container,this.restoreFocusElement=document.activeElement,this.nodeWalker=document.createTreeWalker(this.container,NodeFilter.SHOW_ELEMENT,{acceptNode:node=>{if(node instanceof HTMLElement&&focusable(node))return NodeFilter.FILTER_ACCEPT;return NodeFilter.FILTER_SKIP;}}),this.focusNext(),this.container.addEventListener("keydown",event=>{if(event.key==="Tab"){if(event.shiftKey)this.focusPrevious();else this.focusNext();event.preventDefault();}});}remove(){this.restoreFocusElement.focus();}focusChild(child){child.focus();}focusNext(){const nextNode=this.nodeWalker.nextNode();if(nextNode)this.focusChild(nextNode);else{this.nodeWalker.currentNode=this.container;const nextNode2=this.nodeWalker.nextNode();if(nextNode2)this.focusChild(nextNode2);}}focusPrevious(){const previousNode=this.nodeWalker.previousNode();if(previousNode)this.focusChild(previousNode);else{this.nodeWalker.currentNode=this.container;const lastNode=this.nodeWalker.lastChild();if(lastNode)this.focusChild(lastNode);}}}window.createFocusTrap=container=>{return new FocusTrap(container);};